"use strict";var app=function(){function t(e){if(e.hasOwnProperty("dataType")){var t=e.dataAttachment,r=void 0;switch(e.dataType){case"url":r='Link to <a href="'+t.url+'" target="_blank" rel="noopener">'+t.url+"</a>";break;case"vcard":r="vCard for "+t.firstName+" "+t.lastName;break;case"email":r="Send email to "+t.address;break;case"sms":r="Send SMS to "+t.number;break;case"phone":r="Call "+t.number;break;case"geo":r="Coordinates "+t.lat+", "+t.lon;break;case"wifi":r="Network credentials for "+t.ssid;break;case"text":r="Encoded text: "+t.string;break;default:r="Type unknown"}return'\n            <div class="col-xs-6 col-sm-12">\n                <div class="data-item px-1 py-1 rounded" data-toggle="modal" data-target="#_'+e.id+'">\n                    <span class="td-ul full-width text-center mb-1">\n                        QR Type: '+o[e.dataType]+'\n                    </span>\n                    <img src="'+e.svgUrl+'" class="qr-img" alt="QR image for '+t.url+'">\n                </div>\n            </div>\n\n            <!-- Item Modal '+e.id+' -->\n            <div id="_'+e.id+'" class="modal">\n                <div class="modal-dialog">\n                    <div class="modal-content">\n                        <div class="modal-close">&times;</div>\n                        <h3 class="text-center">QR Description</h3>\n                        <table>\n                            <tr>\n                                <th>Type:</th>\n                                <td>'+o[e.dataType]+"</td>\n                            </tr>\n                            <tr>\n                                <th>Created:</th>\n                                <td>"+e.created+"</td>\n                            </tr>\n                            <tr>\n                                <th>Description:</th>\n                                <td>\n                                    "+r+'\n                                </td>\n                            </tr>\n                            <tr>\n                                <th>API URL:</th>\n                                <td>\n                                    <a href="'+e.apiUrl+'" target="_blank" rel="noopener">View Page</a>\n                                </td>\n                            </tr>\n                            <tr>\n                                <th>Image URL:</th>\n                                <td>\n                                    <a href="'+e.svgUrl+'" target="_blank" rel="noopener">View Image</a>\n                                </td>\n                            </tr>\n                        </table>\n                        <div class="qr-container">\n                            <img class="qr-img" src="'+e.svgUrl+'">\n                        </div>\n                    </div>\n                </div>\n            </div>\n        '}}function r(){s.className="active"}function n(){s.className=""}function e(){s.className?n():r()}var a=function(){var r=window.localStorage.userData||"[]";try{r=JSON.parse(r)}catch(e){window.localStorage.userData="[]",r=[]}return{add:function(e){r.push(e),window.localStorage.userData=JSON.stringify(r)},get:function(t){return r.filter(function(e){return e.id===t})[0]},getAll:function(){return r.reverse()}}}(),o={url:"URL",vcard:"vCard",email:"Email",sms:"SMS",phone:"Phone",geo:"Geo",wifi:"WiFi",text:"Text"},i=document.getElementById("my-codes-btn"),c=document.getElementById("my-codes"),s=document.getElementById("code-panel"),l=document.getElementById("panel-close"),d=document.getElementById("pane-container"),u=document.getElementById("form-select"),m=Array.from(u.querySelectorAll(".pane-btn"));return c.innerHTML=a.getAll().map(t).join(""),i.addEventListener("click",e),document.addEventListener("click",function(e){if("active"===s.className&&e.target!==i){if(e.target===l)return n();for(var t=e.target;t&&t.parentNode!==document;){if(t===s)return;t=t.parentNode}n()}}),{addItem:function(e){a.add(e),c.innerHTML=t(e)+c.innerHTML,window.modal("#_"+e.id),setTimeout(r,750)},showPane:function(e){var t=e.getAttribute("data-target");if(t){Array.from(d.querySelectorAll(".pane")).forEach(function(e){return e.classList.remove("active")});var r=document.querySelector(t);r&&(r.classList.add("active"),m.forEach(function(e){return e.classList.remove("active")}),e.classList.add("active"))}}}}();!function(){function r(i){return function(e){e.preventDefault();var n=!1,t=Array.from(this.querySelectorAll("input, textarea, select")),a={};if(t.filter(function(e){return"submit"!==e.getAttribute("type")}).forEach(function(e){var t=function(e){var t=e.getAttribute("type")?e.getAttribute("type").toLowerCase():null,r=e.getAttribute("name"),n=void 0;switch(t){case"text":case"password":case"submit":case"reset":case"button":case"email":case"number":case"search":case"color":case"date":case"month":case"range":case"tel":case"time":case"url":case"week":return e.value;case"radio":if(!(n=c(e,"form")))return;var a=n.querySelector('input[name="'+r+'"]:checked');return a?a.value:"";case"checkbox":if(!(n=c(e,"form")))return;var o=Array.from(n.querySelectorAll('input[name="'+r+'"]')),i=[];return o.forEach(function(e){e.checked&&i.push(e.value)}),i.join(", ");case"select":return e.value||e.options[e.selectedIndex].value;default:return e.value}}(e),r=e.getAttribute("name");e.getAttribute("data-validator")&&(new RegExp(e.getAttribute("data-validator")).test(t)?(e.classList.remove("error"),e.classList.add("success"),e.nextElementSibling.innerText="",a[r]=t):(n=!0,e.classList.remove("success"),e.classList.add("error"),e.nextElementSibling.innerText=e.getAttribute("data-error"))),t&&(a[r]=t)}),!n){var r=this.getAttribute("action"),o=this.getAttribute("method");if(!r||!o)return console.error('Failed to lookup url or method for form "'+form.title+'"');ajax({url:r,method:o,dataType:"json",data:JSON.stringify(a),success:function(e){app.addItem(e)},error:function(e,t,r){console.error('Error submitting data for "'+i.title+'"'),console.table(JSON.parse(e.response))}})}}}function c(e,t){var r=t;if("string"==typeof t&&(t=function(e){return e.matches(r)}),t(e))return e;for(;e&&e.parentNode!==document;)if(t(e=e.parentNode))return e}[{title:"Email Form",selector:"#email-form"},{title:"URL Form",selector:"#url-form"},{title:"vCard Form",selector:"#vcard-form"},{title:"SMS Form",selector:"#sms-form"},{title:"Phone Form",selector:"#phone-form"},{title:"Geo Form",selector:"#geo-form"},{title:"WiFi Form",selector:"#wifi-form"},{title:"Text Form",selector:"#text-form"}].forEach(function(e){var t=document.querySelector(e.selector);t&&t.addEventListener("submit",r(e))}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector)}(),[{url:"/api/v1/url",containerId:"links"},{url:"/api/v1/vcard",containerId:"vcards"},{url:"/api/v1/email",containerId:"emails"},{url:"/api/v1/sms",containerId:"smss"},{url:"/api/v1/phone",containerId:"phones"},{url:"/api/v1/geo",containerId:"geos"},{url:"/api/v1/wifi",containerId:"wifis"},{url:"/api/v1/text",containerId:"texts"}].forEach(function(n){ajax({url:n.url,method:"GET",dataType:"json",success:function(e){var t="";e.forEach(function(e){t+='\n                        <p>\n                            <a href="'+e.apiUrl+'" target="_blank" rel="noopener" style="font-family: monospace;">'+e.id+"</a><br>\n                            <strong>Created:</strong> "+e.created+"<br>\n                        </p>\n                    "});var r=document.getElementById(n.containerId);r?r.innerHTML=t:console.error("Failed to lookup containerId for "+n.url+" route")},error:function(e,t,r){console.error("Failed to fetch data for "+n.url+" route"),console.error(t,r),console.table(JSON.parse(e.response))}})});
//# sourceMappingURL=main.min.js.map