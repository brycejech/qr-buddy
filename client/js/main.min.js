"use strict";!function(){function t(i){return function(e){e.preventDefault();var n=!1,t=Array.from(this.querySelectorAll("input, textarea, select")),o={};if(t.filter(function(e){return"submit"!==e.getAttribute("type")}).forEach(function(e){var t=function(e){var t=e.getAttribute("type")?e.getAttribute("type").toLowerCase():null,r=e.getAttribute("name"),n=void 0;switch(t){case"text":case"password":case"submit":case"reset":case"button":case"email":case"number":case"search":case"color":case"date":case"month":case"range":case"tel":case"time":case"url":case"week":return e.value;case"radio":if(!(n=c(e,"form")))return;var o=n.querySelector('input[name="'+r+'"]:checked');return o?o.value:"";case"checkbox":if(!(n=c(e,"form")))return;var a=Array.from(n.querySelectorAll('input[name="'+r+'"]')),i=[];return a.forEach(function(e){e.checked&&i.push(e.value)}),i.join(", ");default:return e.value}}(e),r=e.getAttribute("name");e.getAttribute("data-validator")&&(console.log("has data-validator"),new RegExp(e.getAttribute("data-validator")).test(t)?(console.log("validation passed"),e.classList.remove("error"),e.classList.add("success"),e.nextElementSibling.innerText="",o[r]=t):(console.log("validation failed"),n=!0,e.classList.remove("success"),e.classList.add("error"),e.nextElementSibling.innerText=e.getAttribute("data-error"))),t&&(o[r]=t)}),!n){var r=this.getAttribute("action"),a=this.getAttribute("method");if(!r||!a)return console.error('Failed to lookup url or method for form "'+form.title+'"');ajax({url:r,method:a,dataType:"json",data:JSON.stringify(o),success:function(e){var t=document.querySelector(i.imgContainerSelector);t.innerHTML="";var r=document.createElement("a");r.innerText="View Fullscreen",r.setAttribute("target","_blank"),r.setAttribute("rel","noopener"),r.href=e.svgUrl,t.appendChild(r);var n=document.createElement("img");n.src=e.svgUrl,t.appendChild(n)},error:function(e,t,r){console.error('Error submitting data to url "'+i.title+'"')}})}}}function c(e,t){var r=t;if("string"==typeof t&&(t=function(e){return e.matches(r)}),t(e))return e;for(;e&&e.parentNode!==document;)if(t(e=e.parentNode))return e}[{title:"Email Form",selector:"#email-form",imgContainerSelector:".email-img-container"},{title:"URL Form",selector:"#url-form",imgContainerSelector:".url-img-container"},{title:"vCard Form",selector:"#vcard-form",imgContainerSelector:".vcard-img-container"},{title:"SMS Form",selector:"#sms-form",imgContainerSelector:".sms-img-container"},{title:"Phone Form",selector:"#phone-form",imgContainerSelector:".phone-img-container"}].forEach(function(e){document.querySelector(e.selector).addEventListener("submit",t(e))}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector)}(),[{url:"/api/v1/url",containerId:"links"},{url:"/api/v1/vcard",containerId:"vcards"},{url:"/api/v1/email",containerId:"emails"},{url:"/api/v1/sms",containerId:"smss"},{url:"/api/v1/phone",containerId:"phones"}].forEach(function(n){ajax({url:n.url,method:"GET",dataType:"json",success:function(e){var t="";e.forEach(function(e){t+='\n                        <p>\n                            <a href="'+e.apiUrl+'" target="_blank" rel="noopener" style="font-family: monospace;">'+e.id+"</a><br>\n                            <strong>Created:</strong> "+e.created+"<br>\n                        </p>\n                    "});var r=document.getElementById(n.containerId);r?r.innerHTML=t:console.error("Failed to lookup containerId for "+n.url+" route")},error:function(e,t,r){console.error("Failed to fetch data for "+n.url+" route"),console.error(t,r)}})}),function(){function t(e){var t=this.getAttribute("data-target");if(t){Array.from(n.querySelectorAll(".pane")).forEach(function(e){return e.classList.remove("active")});var r=document.querySelector(t);r&&(r.classList.add("active"),o.forEach(function(e){return e.classList.remove("active")}),this.classList.add("active"))}}var n=document.getElementById("pane-container"),o=[document.getElementById("url-pane-btn"),document.getElementById("vcard-pane-btn"),document.getElementById("email-pane-btn"),document.getElementById("sms-pane-btn"),document.getElementById("phone-pane-btn")];o.forEach(function(e){return e.addEventListener("click",t)})}();
//# sourceMappingURL=main.min.js.map